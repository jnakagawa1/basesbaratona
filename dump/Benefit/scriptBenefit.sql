CREATE DATABASE $(MSSQL_DB);
GO
USE $(MSSQL_DB);
GO
CREATE LOGIN $(MSSQL_USER) WITH PASSWORD = '$(MSSQL_PASSWORD)';
GO
CREATE USER $(MSSQL_USER) FOR LOGIN $(MSSQL_USER);
GO
ALTER SERVER ROLE sysadmin ADD MEMBER [$(MSSQL_USER)];
GO


-- IF db_id('autorizador') IS NOT NULL
-- 	BEGIN
-- 		DROP DATABASE autorizador
-- 	END
-- GO

-- IF db_id('autorizador') IS NULL
-- 	BEGIN
-- 		CREATE DATABASE autorizador
-- 	END
-- GO


USE autorizador
GO
CREATE TABLE [dbo].[CTCartao](
	[CODEMPRESA] [char](5) NOT NULL,
	[CODCARTAO] [varchar](20) NOT NULL,
	[STATUSU] [char](2) NULL,
	[DTSTATUSU] [datetime] NULL,
	[NOMEUSU] [varchar](30) NULL,
	[NUMDEPEND] [char](2) NULL,
	[CODCARTIT] [varchar](20) NULL,
	[CPFTIT] [char](14) NULL,
	[DTVALCART] [datetime] NULL,
	[SENHA] [char](4) NULL,
	[PREMIO] [numeric](12, 2) NULL,
	[LIMITE] [numeric](12, 2) NULL,
	[PADPREMIO] [numeric](12, 2) NULL,
	[DTLIMITE] [datetime] NULL,
	[DIASLIMITE] [smallint] NULL,
	[DTULTMOV] [datetime] NULL,
	[ULTFECH] [char](3) NULL,
	[PADACRES] [numeric](12, 2) NULL,
	[FLG_ATIVOU] [char](1) NULL,
	[JA_COB_ATV] [char](1) NULL,
	[PROXLIMITE] [numeric](12, 2) NULL,
	[PROXACRES] [numeric](12, 2) NULL,
 CONSTRAINT [PK_CTCartao] PRIMARY KEY CLUSTERED 
(
	[CODCARTAO] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, FILLFACTOR = 90) ON [PRIMARY],
 CONSTRAINT [IX_CODEMPRESA_CPFTIT_NUMDEPEND] UNIQUE NONCLUSTERED 
(
	[CODEMPRESA] ASC,
	[CPFTIT] ASC,
	[NUMDEPEND] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, FILLFACTOR = 90) ON [PRIMARY]
) ON [PRIMARY]

GO

ALTER TABLE [dbo].[CTCartao] ADD  CONSTRAINT [DF_CTCartao_FLG_ATIVOU]  DEFAULT ('N') FOR [FLG_ATIVOU]
GO